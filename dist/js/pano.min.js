function copyDoc(){return{}}define("three.quaternion",[],function(){return Quaternion=function(a,b,c,d){this.set(a||0,b||0,c||0,void 0!==d?d:1)},Quaternion.prototype={constructor:Quaternion,set:function(a,b,c,d){return this.x=a,this.y=b,this.z=c,this.w=d,this},setFromRotationMatrix:function(a){function b(a,b){return 0>b?-Math.abs(a):Math.abs(a)}var c=Math.pow(a.determinant(),1/3);return this.w=Math.sqrt(Math.max(0,c+a.n11+a.n22+a.n33))/2,this.x=Math.sqrt(Math.max(0,c+a.n11-a.n22-a.n33))/2,this.y=Math.sqrt(Math.max(0,c-a.n11+a.n22-a.n33))/2,this.z=Math.sqrt(Math.max(0,c-a.n11-a.n22+a.n33))/2,this.x=b(this.x,a.n32-a.n23),this.y=b(this.y,a.n13-a.n31),this.z=b(this.z,a.n21-a.n12),this.normalize(),this},normalize:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===a?(this.x=0,this.y=0,this.z=0,this.w=0):(a=1/a,this.x=this.x*a,this.y=this.y*a,this.z=this.z*a,this.w=this.w*a),this}},Quaternion}),define("three.vector3",[],function(){return Vector3=function(a,b,c){this.x=a||0,this.y=b||0,this.z=c||0},Vector3.prototype={constructor:Vector3,set:function(a,b,c){return this.x=a,this.y=b,this.z=c,this},length:function(){return Math.sqrt(this.lengthSq())},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},Vector3}),define("three.matrix4",["three.vector3"],function(a){return Matrix4=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.set(void 0!==a?a:1,b||0,c||0,d||0,e||0,void 0!==f?f:1,g||0,h||0,i||0,j||0,void 0!==k?k:1,l||0,m||0,n||0,o||0,void 0!==p?p:1)},Matrix4.prototype={constructor:Matrix4,set:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return this.n11=a,this.n12=b,this.n13=c,this.n14=d,this.n21=e,this.n22=f,this.n23=g,this.n24=h,this.n31=i,this.n32=j,this.n33=k,this.n34=l,this.n41=m,this.n42=n,this.n43=o,this.n44=p,this},decompose:function(b,c,d){var e=Matrix4.__v1,f=Matrix4.__v2,g=Matrix4.__v3;e.set(this.n11,this.n21,this.n31),f.set(this.n12,this.n22,this.n32),g.set(this.n13,this.n23,this.n33),b=b instanceof a?b:new a,c=c instanceof Quaternion?c:new Quaternion,d=d instanceof a?d:new a,d.x=e.length(),d.y=f.length(),d.z=g.length(),b.x=this.n14,b.y=this.n24,b.z=this.n34;var h=Matrix4.__m1;return h.copy(this),h.n11/=d.x,h.n21/=d.x,h.n31/=d.x,h.n12/=d.y,h.n22/=d.y,h.n32/=d.y,h.n13/=d.z,h.n23/=d.z,h.n33/=d.z,c.setFromRotationMatrix(h),[b,c,d]},copy:function(a){return this.set(a.n11,a.n12,a.n13,a.n14,a.n21,a.n22,a.n23,a.n24,a.n31,a.n32,a.n33,a.n34,a.n41,a.n42,a.n43,a.n44),this},determinant:function(){var a=this.n11,b=this.n12,c=this.n13,d=this.n14,e=this.n21,f=this.n22,g=this.n23,h=this.n24,i=this.n31,j=this.n32,k=this.n33,l=this.n34,m=this.n41,n=this.n42,o=this.n43,p=this.n44;return d*g*j*m-c*h*j*m-d*f*k*m+b*h*k*m+c*f*l*m-b*g*l*m-d*g*i*n+c*h*i*n+d*e*k*n-a*h*k*n-c*e*l*n+a*g*l*n+d*f*i*o-b*h*i*o-d*e*j*o+a*h*j*o+b*e*l*o-a*f*l*o-c*f*i*p+b*g*i*p+c*e*j*p-a*g*j*p-b*e*k*p+a*f*k*p}},Matrix4.__v1=new a,Matrix4.__v2=new a,Matrix4.__v3=new a,Matrix4.__m1=new Matrix4,Matrix4.__m2=new Matrix4,Matrix4}),define("utils.log",[],function(){function a(){document.getElementsByTagName("BODY")[0];this.o,this.init()}a.prototype={constructor:a,init:function(){this.o=this.logWrap(0),document.getElementsByTagName("BODY")[0].appendChild(this.o)},logWrap:function(a){var b=document.createElement("DIV");return b.style.position="absolute",b.style.top=a+"px",b.style.background="black",b.style.color="yellow",b.style.fontSize="11px",b.style.fontFamily="Helvetica, Arial",b.style.width="100%",b.style.opacity=".7",b},conlog:function(a){var a=a||[];this.o.innerHTML="";for(var b=0;b<a.length;b++)this.o.innerHTML+="<br>"+a[b],console.log(a[b])},permlog:function(a){var b=this.logWrap(30);b.innerHTML=a,document.getElementsByTagName("BODY")[0].appendChild(b)}};var b=new a,c=function(a){b.conlog(a)};return c}),define("pano.gyro",["three.quaternion","three.matrix4","three.vector3","utils.log"],function(a,b,c){function d(a){var b=180*a/Math.PI;return b}function e(a){this.s=document.createElement("DIV"),this.matrix=new b,this.vec3=new c,this.orientation=0,this.invert=1,this.prefix=a.prefix,this.listeners=[],this.init()}return e.prototype={constructor:e,init:function(){document.body.appendChild(this.s),this.updateOrientation(null),this.invert="moz"===this.prefix.js.toLowerCase()?-1:1,this.degree()},post:function(a){for(var b=0;b<this.listeners.length;b++)if(this.listeners[b].type===a)switch(a){case"onMotionUpdate":this.listeners[b].callback.call(this,{orientation:this.orientation,vec3:this.vec3});break;default:return!1}},addEventListener:function(a,b){this.listeners.push({type:a,callback:b})},removeEventListener:function(a){for(var b=0;b<this.listeners.length;b++)this.listeners[b].type===a&&this.listeners.splice(b,1)},degree:function(){var a=this,b=0,c={},e=a.s,f=function(f){if(a.updateOrientation(null),90==a.orientation||-90==a.orientation)a.vec3.set(f.alpha*a.invert,f.gamma*(a.orientation/90)*-1*a.invert,f.beta*(a.orientation/90)*a.invert);else{e.style[a.prefix.js+"Transform"]="rotateY("+-f.gamma+"deg) rotateX("+f.beta+"deg) rotateZ("+f.alpha+"deg)";var g=window.getComputedStyle(e,null),h=g.getPropertyValue(a.prefix.css+"transform").split("(")[1].split(")")[0].split(",");a.matrix.set(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15]),c=a.matrix.decompose()[1];var i=c.w*c.w-c.x*c.x-c.y*c.y+c.z*c.z,j=Math.atan2(2*(c.y*c.z+c.w*c.x),i);b=180==a.orientation?f.alpha+-f.gamma:f.alpha+f.gamma,b>360?b-=360:0>b&&(b+=360),a.vec3.set(b*a.invert,-1*d(j)*a.invert,d(Math.asin(-2*(c.x*c.z-c.w*c.y)))*a.invert)}a.post("onMotionUpdate")};window.addEventListener("deviceorientation",f,!1)},updateOrientation:function(){var a=this;switch(window.orientation){case-90:a.orientation=window.orientation;break;case 0:a.orientation=window.orientation;break;case 90:a.orientation=window.orientation;break;case 180:a.orientation=window.orientation}}},e}),define("pano.inertia",["utils.log"],function(){function a(a,b,c){this.easeFunction=a,this.currentX=0,this.currentY=0,this.touchStartX=0,this.touchStartY=0,this.touchCurrentX=0,this.touchCurrentY=0,this.touchLastCurrentX=0,this.touchLastCurrentY=0,this.deltaX=0,this.deltaY=0,this.trackDelta=!1,this.duration=b,this.time=0,this.scalar=c,this.vec3={x:0,y:0,z:0},this.listeners=[],this.delta={x:[],y:[]},this.deltaHistory=5,this.init()}return a.prototype={constructor:a,init:function(){this.events(),this.ease()},post:function(a){for(var b=0;b<this.listeners.length;b++)if(this.listeners[b].type===a)switch(a){case"onMotionUpdate":this.listeners[b].callback.call(this,{vec3:this.vec3});break;default:return!1}},addEventListener:function(a,b){this.listeners.push({type:a,callback:b})},removeEventListener:function(a){for(var b=0;b<this.listeners.length;b++)this.listeners[b].type===a&&this.listeners.splice(b,1)},events:function(){var a=this,b=function(b){var c="undefined"!=typeof b.changedTouches?b.changedTouches:[b];b.type.match(/down|start/i)&&(a.touchStartX=parseInt(c[0].clientX),a.touchStartY=parseInt(c[0].clientY),a.trackDelta=!0,this.deltaX=0,this.deltaY=0,a.delta.x=[],a.delta.y=[]),b.type.match(/move/i)&&(b.preventDefault(),a.trackDelta&&(a.vec3.x=a.currentX+parseInt(c[0].clientX)-a.touchStartX,a.vec3.y=a.currentY+parseInt(c[0].clientY)-a.touchStartY,a.touchCurrentX=parseInt(c[0].clientX),a.touchCurrentY=parseInt(c[0].clientY),a.post("onMotionUpdate"),a.getDelta())),b.type.match(/up|end|leave/i)&&(a.touchStartX=a.vec3.x,a.touchStartY=a.vec3.y,a.trackDelta=!1,a.time=0),b.type.match(/cancel/i)&&(this.deltaX=0,this.deltaY=0,a.delta.x=[],a.delta.y=[],b.preventDefault())};window.navigator.msPointerEnabled?("undefined"!=typeof document.body.style.msTouchAction&&(document.body.style.msTouchAction="none"),window.addEventListener("MSPointerDown",b,!1),window.addEventListener("MSPointerMove",b,!1),window.addEventListener("MSPointerUp",b,!1)):"ontouchstart"in window&&(window.addEventListener("touchstart",b,!1),window.addEventListener("touchmove",b,!1),window.addEventListener("touchend",b,!1),window.addEventListener("touchleave",b,!1),window.addEventListener("touchcancel",b,!1)),window.addEventListener("mousedown",b,!1),window.addEventListener("mousemove",b,!1),window.addEventListener("mouseup",b,!1)},linearTween:function(a,b,c,d){return c*a/d+b},easeInQuad:function(a,b,c,d){return a/=d,c*a*a+b},easeOutQuad:function(a,b,c,d){return a/=d,-c*a*(a-2)+b},easeInOutQuad:function(a,b,c,d){return a/=d/2,1>a?c/2*a*a+b:(a--,-c/2*(a*(a-2)-1)+b)},easeInCubic:function(a,b,c,d){return a/=d,c*a*a*a+b},easeOutCubic:function(a,b,c,d){return a/=d,a--,c*(a*a*a+1)+b},easeInOutCubic:function(a,b,c,d){return a/=d/2,1>a?c/2*a*a*a+b:(a-=2,c/2*(a*a*a+2)+b)},easeInQuart:function(a,b,c,d){return a/=d,c*a*a*a*a+b},easeOutQuart:function(a,b,c,d){return a/=d,a--,-c*(a*a*a*a-1)+b},easeInOutQuart:function(a,b,c,d){return a/=d/2,1>a?c/2*a*a*a*a+b:(a-=2,-c/2*(a*a*a*a-2)+b)},easeInQuint:function(a,b,c,d){return a/=d,c*a*a*a*a*a+b},easeOutQuint:function(a,b,c,d){return a/=d,a--,c*(a*a*a*a*a+1)+b},easeInOutQuint:function(a,b,c,d){return a/=d/2,1>a?c/2*a*a*a*a*a+b:(a-=2,c/2*(a*a*a*a*a+2)+b)},easeInSine:function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},easeOutSine:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOutSine:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},easeInExpo:function(a,b,c,d){return c*Math.pow(2,10*(a/d-1))+b},easeOutExpo:function(a,b,c,d){return c*(-Math.pow(2,-10*a/d)+1)+b},easeInOutExpo:function(a,b,c,d){return a/=d/2,1>a?c/2*Math.pow(2,10*(a-1))+b:(a--,c/2*(-Math.pow(2,-10*a)+2)+b)},easeInCirc:function(a,b,c,d){return a/=d,-c*(Math.sqrt(1-a*a)-1)+b},easeOutCirc:function(a,b,c,d){return a/=d,a--,c*Math.sqrt(1-a*a)+b},easeInOutCirc:function(a,b,c,d){return a/=d/2,1>a?-c/2*(Math.sqrt(1-a*a)-1)+b:(a-=2,c/2*(Math.sqrt(1-a*a)+1)+b)},getDelta:function(){for(this.deltaX=this.touchCurrentX-this.touchLastCurrentX,this.deltaY=this.touchCurrentY-this.touchLastCurrentY,this.touchLastCurrentX=this.touchCurrentX,this.touchLastCurrentY=this.touchCurrentY,this.delta.x.unshift(this.deltaX),this.delta.y.unshift(this.deltaY);this.delta.x.length>this.deltaHistory;)this.delta.x.pop();for(;this.delta.y.length>this.deltaHistory;)this.delta.y.pop()},ease:function(){var a=this;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),function b(){requestAnimFrame(b),!a.trackDelta&&a.time<=a.duration?(a.currentX=a[a.easeFunction](a.time,a.touchStartX,a.deltaX*a.scalar,a.duration),a.currentY=a[a.easeFunction](a.time,a.touchStartY,a.deltaY*a.scalar,a.duration),a.vec3.x=a.currentX,a.vec3.y=a.currentY,a.time++,a.post("onMotionUpdate")):(a.deltaX=[],a.deltaY=[])}()}},a}),define("utils.imageloader",[],function(){function a(){this.listeners=[],this.images=[]}return a.prototype={constructor:a,post:function(a){for(var b=0;b<this.listeners.length;b++)if(this.listeners[b].type===a)switch(a){case"onLoad":this.listeners[b].callback.call(this,{images:this.images});break;default:return!1}},addEventListener:function(a,b){this.listeners.push({type:a,callback:b})},load:function(a){var b=this,c=function(a){for(var b=null,c=[],e=a.length,f=0;f<a.length;f++){var b=new Image;b.onload=function(){--e,0>=e&&d(c)},b.onerror=function(){throw"Image location or URL not found."},b.src=a[f],c.push(b)}},d=function(a){b.images=a,b.post("onLoad")};c(a)}},a}),define("pano.cube",["utils.imageloader","utils.log"],function(a){function b(a,b){this.skins=a,this.faces=b,this.user=null,this.listeners=[],this.prefix="",this.panorama=document.querySelector("#PANO"),this.scene=document.querySelector("#PANO_scene"),this.fov=2*Math.atan(.5*window.innerHeight/20)*180/Math.PI+100,this.initialised=!1}return b.prototype={constructor:b,load:function(a){var b=this;b.user=a,b.prefix=a.prefix.js,b.loadImages()},post:function(a){for(var b=0;b<this.listeners.length;b++)if(this.listeners[b].type===a)switch(a){case"onLoaded":this.listeners[b].callback.call(this,{panorama:this.panorama,skins:this.skins});break;default:return!1}},addEventListener:function(a,b){this.listeners.push({type:a,callback:b})},loadImages:function(){var b=new a,c=this,d=[],e=function(a){c.imgArray=a.images;for(var b=0;b<a.images.length;b++)a.images[b].style.display="none",document.body.appendChild(a.images[b]);c.buildFaces()};b.addEventListener("onLoad",e);for(var f=0;f<this.skins.length;f++)d=d.concat(this.skins[f].media);b.load(d)},buildFaces:function(){for(var a={},b=0;b<this.skins.length;b++){var c=this.skins[b].type;a[c]={},a[c].name=c,a[c].faces=[];for(var d=0;d<this.faces.length;d++){var e=document.createElement("div");document.querySelector("#"+this.faces[d]).appendChild(e),e.className="face_media",e.style.backgroundImage='url("'+this.skins[b].media[d]+'")',a[c].faces.push(e),b!==this.skins.length-1?(e.style.opacity="0",a[c].active=!1):a[c].active=!0}}this.skins=a,this.initialised||(this.initialised=!0,this.post("onLoaded")),this.addListeners()},addListeners:function(){window.onresize=function(){self.fov=2*Math.atan(.5*window.innerHeight/20)*180/Math.PI+100}},rotate:function(a){this.panorama.style[this.prefix+"Perspective"]=this.fov+"px",this.panorama.style[this.prefix+"TransformStyle"]="preserve-3d",this.scene.style[this.prefix+"Transform"]="translate3d(0px, 0px, "+this.fov+"px)  rotateZ("+a.vec3.z%360*-1+"deg) rotateX(-90deg) rotateX("+a.vec3.y%360+"deg) rotateY("+a.vec3.x%360*-1+"deg) rotateY(0deg)",document.querySelector("#PANO_scene_b").style[this.prefix+"Transform"]="rotateZ("+a.vec3.z%360*-1+"deg) rotateX(-90deg) rotateX("+a.vec3.y%360+"deg) rotateY("+a.vec3.x%360*-1+"deg) rotateY(0deg)"}},b}),define("pano.deviceDetect",["utils.log"],function(){var a=function(){var a={model:""},b=function(b){a.model=b};return navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)?b("ios"):navigator.userAgent.match(/Android/i)?b("android"):b("unknown"),a};return a()}),define("pano.copy",function(){}),define("pano.language",["pano.copy"],function(){var a=function(a){return this.langRef={"en-RO":"en","en-CA":"en","en-TR":"en","en-HU":"en","ja-JP":"jp","en-LV":"en","en-HK":"en","en-LU":"en","en-LT":"en","pt-BR":"br","de-DE":"de","en-DK":"en","en-FI":"en","en-IE":"en","fr-FR":"fr","en-BG":"en","en-BE":"en","en-KW":"en","en-SK":"en","en-GB":"en","en-MO":"en","it-IT":"it","en-MT":"en","de-AT":"de","en-CZ":"en","en-CY":"en","en-US":"en","en-SE":"en","ko-KR":"kr","en-SG":"en","en-QA":"en","en-MY":"en","en-SI":"en","en-AU":"en","en-EE":"en","zh-CN":"zf","zh-TW":"zf","en-PT":"en","en-PL":"en","ru-RU":"ru","en-CH":"en","en-GR":"en","es-ES":"es","en-AE":"en","en-NL":"en"},this.lang=this.langRef[a],this.copy=copyDoc()[this.lang],{copy:this.copy,lang:this.lang}},b=function(){var a="undefined"!=typeof window.navigator.language?window.navigator.language:"undefined"!=typeof window.navigator.userLanguage?window.navigator.userLanguage:"";return a.replace(a.substr(a.indexOf("-")),"-"+a.substring(3,5).toUpperCase())};return a(b())}),define("pano.prefix",[],function(){var a=function(){var a=window.getComputedStyle(document.documentElement,""),b=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1],c="WebKit|Moz|MS|O".match(new RegExp("("+b+")","i"))[1];return{dom:c,lowercase:b,css:"-"+b+"-",js:"moz"==b?c:b[0].toLowerCase()+b.substr(1)}};return a()}),define("pano.userSupport",["pano.deviceDetect","pano.language","pano.prefix","utils.log"],function(a,b,c){function d(){this.listeners=[],this.user={}}return d.prototype={constructor:d,post:function(a){for(var b=0;b<this.listeners.length;b++)if(this.listeners[b].type===a)switch(a){case"supportStatusUpdate":this.listeners[b].callback.call(this,this.user);break;default:return!1}},addEventListener:function(a,b){this.listeners.push({type:a,callback:b})},test:function(){var d=this,e=d.user;if(e.supported=!0,e.locale=b,e.device=a,e.prefix=c,"ms"===e.prefix.js.toLowerCase()){var f=document.createElement("LINK");document.getElementsByTagName("HEAD")[0].insertBefore(f,null),f.style[e.prefix.js+"TransformStyle"]="preserve-3d";var g=window.getComputedStyle(f,null),h=g.getPropertyValue(e.prefix.css+"transform-style");e.supported="preserve-3d"!==h?!1:!0,f.parentNode.removeChild(f)}var i=function(a){if(window.DeviceOrientationEvent){var b=null,c=null,d=0,e=function(a){c=a};window.addEventListener("deviceorientation",e,!1),b=window.setInterval(function(){null!==c&&null!==c.alpha?(clearInterval(b),window.removeEventListener("deviceorientation",e),a.call(this,!0)):(d++,10===d&&(clearInterval(b),window.removeEventListener("deviceorientation",e),a.call(this,!1)))},200)}else a.call(this,!1)},j=function(a){e.gyro=a,d.post("supportStatusUpdate")};i(j)}},d}),define("pano.track",[],function(){function a(a){_gaq.push(["_setAccount",a]),_gaq.push(["_trackPageview"]),null!==_gat&&(this.pageTracker=_gat._getTrackerByName()||null,this.accountId=this.pageTracker._getAccount()||null),this.timeStamp=(new Date).getTime(),this.eventArray=[]}return a.prototype={constructor:a,event:function(a,b,c){var d=this;d.eventArray.push([a,b,c])},pushEvents:function(a,b){var c=this,d=!1,a=a||!1,e="",f=c.eventArray.length;if(a){var g=(new Date).getTime(),h=Math.max(0,Math.floor((g-c.timeStamp)/1e3)),i=h%60,j=Math.floor((h/=60)%60),k=Math.floor((h/=60)%24);e=" - "+k+":"+j+":"+i}for(var l=0;l<c.eventArray.length;l++)null!==_gat&&(d=c.pageTracker._trackEvent("BRW_POS___"+c.eventArray[l][0],c.eventArray[l][1],c.eventArray[l][2]+e)),--f,0>=f&&"function"==typeof b&&b();c.eventArray=[]}},a}),define("utils.eventListener",[],function(){function a(){this.listeners=[]}return a.prototype={constructor:a,post:function(a,b){for(var c=0;c<this.listeners.length;c++)this.listeners[c].type===a&&this.listeners[c].callback.call(this,b?b:null)},addEventListener:function(a,b){if("function"!=typeof b)throw b?"Event callback is not function.":"Please reference an event callback.";if("string"!=typeof a)throw a?"Event type should be a string.":"Please reference an event type.";this.listeners.push({type:a,callback:b})},removeEventListener:function(a){for(var b=0;b<this.listeners.length;b++)this.listeners[b].type===a&&this.listeners.splice(b,1)},animationListener:function(a,b,c,d){var d="moz"===d.toLowerCase()?"":d.toLowerCase(),e=function(f){c.call(this,{e:f}),a.removeEventListener(d+b,e)};a.addEventListener(d+(""===d?b.toLowerCase():b),e,!1)}},a}),define("pano.ui.view",["utils.eventListener","utils.log"],function(a){function b(){}return b.prototype=new a,b.prototype.constructor=b,b}),define("pano.ui.loadView",["pano.ui.view","utils.log"],function(a){function b(){this.user={},this.view=document.getElementById("PANO_load")}return b.prototype=new a,b.prototype.constructor=b,b.prototype.kill=function(a){var b=this;b.user=a;var c=function(){document.body.removeChild(this),b.post("onDistruction",{event:"onDistruction"})};this.animationListener(b.view,"AnimationEnd",c,a.prefix.js),setTimeout(function(){b.view.className="PANO_killLoad"},1e3)},b}),define("pano.ui.instructionView",["pano.ui.view","utils.log"],function(a){function b(){this.user=null,this.useGyro=null,this.view=document.getElementById("PANO_instructions"),this.viewChildren={gyro:document.getElementById("PANO_instruct_gyro"),inertia:document.getElementById("PANO_instruct_inertia")}}return b.prototype=new a,b.prototype.constructor=b,b.prototype.init=function(a,b){this.user=a,this.instructMotion(this.user.gyro&&b?"gyro":"inertia"),this.view.style.display="none"},b.prototype.instructMotion=function(a){var b=this,c=function(){this.style.display="none",b.viewChildren[a].style.display="table-cell",b.viewChildren[a].className="PANO_instructOn"};for(key in this.viewChildren)key!==a&&(this.viewChildren[key].className="PANO_instructOff",this.animationListener(this.viewChildren[key],"AnimationEnd",c,this.user.prefix.js))},b.prototype.updateMotion=function(a){this.instructMotion(a?"gyro":"inertia")},b}),define("utils.requestAnimation",[],function(){return requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}()}),define("pano.ui",["pano.ui.loadView","pano.ui.instructionView","utils.requestAnimation","utils.log"],function(a,b){function c(){this.user={},this.cube={},this.vec3={},this.listeners=[],this.useGyro=!0,this.loadView=new a,this.instructionView=new b}return c.prototype={constructor:c,init:function(a,b){this.user=a,this.cube=b,this.useGyro="android"===a.device.model.toLowerCase()?!1:!0,this.loadView.kill(a),this.instructionView.init(a,this.useGyro),a.gyro||(document.body.className="inertia"),this.useGyro||this.motionToggle()},post:function(a){for(var b=0;b<this.listeners.length;b++)if(this.listeners[b].type===a)switch(a){case"motionToggle":this.listeners[b].callback.call(this,this.useGyro);break;default:return!1}},addEventListener:function(a,b){this.listeners.push({type:a,callback:b})},motionToggle:function(){var a=this;this.motionToggleButton=document.createElement("DIV"),this.motionToggleButton.setAttribute("id","motionToggleButton"),this.motionToggleButton.innerHTML="<p>Explore via gyroscope</p>",document.body.appendChild(this.motionToggleButton),this.motionToggleButton.onclick=function(){a.useGyro=a.useGyro?!1:!0,a.motionToggleButton.style.color=a.useGyro?"#333":"#FFF",a.instructionView.updateMotion(a.useGyro),a.post("motionToggle")}},rotate:function(a){this.vec3=a.vec3,document.querySelector("#PANO_track").style[this.user.prefix.js+"Transform"]="rotateX("+(a.vec3.y-30)+"deg) rotate("+a.vec3.x%360*-1+"deg)"}},c}),define("app/pano.index",["pano.gyro","pano.inertia","pano.cube","pano.userSupport","pano.track","pano.ui","three.vector3","utils.log"],function(a,b,c,d,e,f,g,h){var i=["PANO_north","PANO_east","PANO_south","PANO_west","PANO_up","PANO_down"],j=[{type:"paris",media:["img/panorama/s2_n.jpg","img/panorama/s2_e.jpg","img/panorama/s2_s.jpg","img/panorama/s2_w.jpg","img/panorama/s2_u.jpg","img/panorama/s2_d.jpg"]}],k=new d,l=new c(j,i),f=new f,m=new g,n=null,o=null,p=null,q=function(a){a.supported?l.load(a):h(["User unsupported"]),k=a},r=function(a){m.set(a.vec3.x,a.vec3.y,a.vec3.z),l.rotate(a),f.rotate(a)},s=function(c){p=k.gyro?new a(k):null,o=new b("easeOutQuad",29,10),n=k.gyro&&"android"!==k.device.model.toLowerCase()?p:o,n.addEventListener("onMotionUpdate",r),f.init(k,c)},t=function(a){n.removeEventListener("onMotionUpdate",r),n=null,n=a?p:o,n.addEventListener("onMotionUpdate",r)};k.addEventListener("supportStatusUpdate",q),l.addEventListener("onLoaded",s),f.addEventListener("motionToggle",t),k.test()}),require.config({deps:["app/pano.index"],paths:{handlebars:"lib/handlebars-v1.3.0","three.matrix4":"lib/three.matrix4","three.vector3":"lib/three.vector3","three.quaternion":"lib/three.quaternion","utils.imageloader":"utils/utils.imageLoader","utils.log":"utils/utils.logger","utils.requestAnimation":"utils/utils.requestAnimation","utils.animationListener":"utils/utils.animationListener","utils.eventListener":"utils/utils.eventListener","pano.gyro":"app/motion/pano.gyro","pano.inertia":"app/motion/pano.inertia","pano.copy":"app/copy/pano.copy","pano.template":"app/pano.template","pano.cube":"app/pano.cube","pano.ui":"app/pano.ui","pano.ui.animate":"app/pano.ui.animate","pano.ui.view":"app/pano.ui.view","pano.ui.loadView":"app/pano.ui.loadView","pano.ui.instructionView":"app/pano.ui.instructionView","pano.track":"app/tracking/pano.track","pano.userSupport":"app/device/pano.userSupport","pano.language":"app/device/pano.language","pano.deviceDetect":"app/device/pano.deviceDetect","pano.prefix":"app/device/pano.prefix"},shim:{handlebars:{exports:"Handlebars"}}}),define("require.config",function(){});